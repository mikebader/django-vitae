{% extends "cv/base.html" %}
{% load cv %}
{% load static %}

{% block centerbar %}
    {% block contact %}{{block.super}}{% endblock contact %}

    <h2 class="col-12">
        {% block maintitle %}{{object.title}}{% endblock %}
        {% if user.is_authenticated %}
            {% edit_item object %}
        {% endif %}
    </h2>

    {% block abstract %}
        {% if object.abstract %}
            <div class="col-12 col-sm-10">
                <h3 class="mt-4 abstract-name">{% block abstract_name %}Abstract{% endblock abstract_name %}</h3>
                <div id="abstract" class="abstract">
                {{object.abstract_html|safe}}
                </div>
            </div>
        {% endif %}
    {% endblock abstract %}


    {% block citation %}
        <div class="col-12 citation">
            {% block formatted_citation %}<strong>Citation.</strong> {% cite_item object %}{% endblock %}
        </div>
        <div class="btn-group col-12 col-sm-10 mt-2 citation-links">
            {% block url %}
            {% if object.url %}
                <a class="btn btn-outline-primary btn-sm text-primary" role="button" href="{{object.url}}" title="Go to {{model_name}} website"><i class="fas fa-external-link-alt"></i> {% block type_and_location %}Go to {{model_name}} website{% endblock type_and_location %}</a>
            {% endif %}
            {% endblock %}
            {% cite_download object 'ris' %}
            {% cite_download object 'bib' %}
        </div>
    {% endblock citation %}

    {% block files %}
        {% if object.files.all or user.is_authenticated %}
            <div class="col-12 col-sm-10 files">
                <h3 class="mt-4">Files</h3>
                {% with object.files.all as files %}
                    <ul>
                        {% if files %}
                            {% for file in files %}
                                <li class="details">
                                    <a class="btn btn-secondary btn-sm" role="button" href="{{file.file.url}}"><span class='fa fa-download' aria-hidden="true"></span> Download {{file.get_type_display|lower}}</a>
                                </li>
                            {% endfor %}    
                            {% else %}
                                <li>No files.</a></li>
                        {% endif %}
                    </ul>
                {% endwith %}
                </div>
        {% endif %}
    {% endblock files %}

    {% block type-specific-info %}{% endblock %}

    {% block media_mentions %}
    {% with object.mediamention_set.all as mentions %}
        {% if mentions %}
        <h3 class="mt-4">Media Mentions</h3>
            <ul>
                {% for mention in mentions %}
                    <li class="details">{{mention.title}}, <cite>{{mention.outlet}}</cite> ({{mention.date|date:"b d, Y"|title}}){% if mention.url %} <a class="media-mention" href="{{mention.url}}" title="View story on external site"><i class="fas fa-external-link-alt" aria-hidden="true"></i>{% endif %}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
    {% endblock media_mentions %}

{% endblock centerbar %}

{% block next-previous %}
<div class="col-12 col-sm-10">
    <a href="{% url 'cv:section_list' model_name=model_name %}">&#xab;Go to {{model_name_plural}}</a><br /><br />
    <a href="{% url 'cv:cv_list' %}#{{model_name}}-{{object.slug}}">&#xab;Go to CV</a>
</div>
{% endblock %}

